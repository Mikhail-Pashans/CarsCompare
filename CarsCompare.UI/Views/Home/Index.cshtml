@{
    ViewBag.Title = "CarsCompare - Главная страница";
}

@Styles.Render("~/Content/ui-bootstrap", "~/Content/select")
@Scripts.Render("~/bundles/angular", "~/bundles/ui-bootstrap", "~/bundles/select")

<div data-ng-app="carsCompareApplication">
    <div data-ng-controller="compareCtrl">
        <div class="row mt-15">
            <div class="col-md-6">
                <button class="btn btn-success" data-ng-click="addCar()" data-ng-disabled="cars.length >= 4">Выбрать автомобиль для сравнения</button>
            </div>
            <div class="col-md-6 text-right" data-ng-if="!!cars.length">
                <button class="btn btn-link" data-ng-click="clearCars()">Очистить сравнение</button>
            </div>
        </div>
        <div class="row mt-15">
            <div class="col-md-{{ 12 / cars.length }}" data-ng-repeat="car in cars">
                <div class="thumbnail">
                    <button class="btn btn-link" data-ng-click="changeCar($index)">Изменить</button>
                    <span class="close" data-ng-click="removeCar($index)"><span aria-hidden="true">&times;</span></span>
                    <img class="mt-25" data-ng-src="{{ car.image }}" alt="{{ car.brand.name + ' ' +  car.model.name + ' ' + car.version.gen + ' ' + car.version.mod + ' ' + car.modify.name + ' ' + ( car.modify.yearFrom | formatBigYear ) + ' &ndash; ' + ( car.modify.yearTo | formatBigYear ) }}">
                    <div class="caption">
                        <h4 data-ng-class="car.best ? 'text-success' : ''">{{ car.brand.name + ' ' +  car.model.name + ' ' + car.version.gen + ' ' + car.version.mod + ' ' + car.modify.name + ' ' + ( car.modify.yearFrom | formatBigYear ) + ' &ndash; ' + ( car.modify.yearTo | formatBigYear ) }}</h4>
                    </div>
                    <div class="panel-group" id="accordion{{ car.modify.id }}" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div data-ng-repeat="paramGroup in paramGroups">
                                <div class="panel-heading bg-info" role="tab" id="heading{{ car.modify.id + '-' + paramGroup.id }}">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion{{ car.modify.id + '-' + paramGroup.id }}" href="#collapse{{ car.modify.id + '-' + paramGroup.id }}" aria-expanded="true" aria-controls="collapse{{ car.modify.id }}">
                                            {{ paramGroup.name }}
                                        </a>
                                    </h4>
                                </div>
                                <div class="panel-collapse collapse in" id="collapse{{ car.modify.id + '-' + paramGroup.id }}" role="tabpanel" aria-labelledby="heading{{ car.modify.id + '-' + paramGroup.id }}">
                                    <div class="panel-body">
                                        <p data-ng-class="paramName.best ? 'text-success' : 'text-muted'" data-ng-repeat="paramName in paramGroup.paramNames">
                                            {{ paramName.name }}&nbsp;
                                            <span data-ng-if="paramName.units">
                                                ({{ paramName.units }})
                                            </span>
                                            :
                                            <span data-ng-repeat="param in car.params | objectsArrayFirst : paramName">
                                                {{ param.value | paramBlankValue }}
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/customScripts")