@{
    ViewBag.Title = "CarsCompare - Главная страница";
}

@Styles.Render("~/Content/ui-bootstrap", "~/Content/select")
@Scripts.Render("~/bundles/angular", "~/bundles/ui-bootstrap", "~/bundles/select")

@*<div class="jumbotron" data-ng-app="carsCompareApplication">
        <div data-ng-controller="compareCtrl">
            <table class="table table-striped">
                <thead class="text-center">
                    <tr>
                        <th class="text-center one-fifth">
                            <div class="full-width cp" data-ng-click="addCar()">
                                <p>Выбрать автомобиль для сравнения</p>
                                <img src="@Url.Content("~/Content/Images/add.png")" alt="" />
                                <p class="full-width text-center">
                                    <small><a href="javascript:void(0)" data-ng-click="clearCars()">Очистить сравнение</a></small>
                                </p>
                            </div>
                        </th>
                        <th class="bg-info" data-ng-repeat="car in cars" data-ng-if="!!cars.length" class="one-fifth">
                            <div class="full-width">
                                <p>{{ car.brand.name + ' ' + car.model.name }}</p>
                                <p>{{ car.version.name }}</p>
                                <p>{{ (car.modify.yearFrom | formatBigYear) + ' &ndash; ' + (car.modify.yearTo | formatBigYear) }}</p>
                                <p>
                                    <small>
                                        <a class="pull-left" href="javascript:void(0)" data-ng-click="changeCar($index)">Изменить</a>
                                    </small>
                                    &emsp;
                                    <small>
                                        <a class="pull-right" href="javascript:void(0)" data-ng-click="removeCar($index)">Удалить</a>
                                    </small>
                                </p>
                            </div>
                        </th>
                        <th data-ng-if="!cars.length" colspan="4">&nbsp;</th>
                        <th data-ng-if="cars.length < 4" colspan="{{ 4 - cars.length }}">&nbsp;</th>
                    </tr>
                </thead>
                <tbody class="text-left" data-ng-repeat="paramGroup in paramGroups" data-ng-if="!!cars.length">
                    <tr class="warning">
                        <td class="one-fifth">
                            <strong>{{ paramGroup.name }}</strong>
                        </td>
                        <td colspan="{{ cars.length }}"></td>
                        <td data-ng-if="cars.length < 4" colspan="{{ 4 - cars.length }}">&nbsp;</td>
                    </tr>
                    <tr data-ng-repeat="paramName in paramGroup.paramNames">
                        <td class="one-fifth">
                            <ul>
                                <li>
                                    <em>{{ paramName.name }}</em>
                                </li>
                            </ul>
                        </td>
                        <td data-ng-repeat="car in cars" data-ng-if="!!cars.length" class="one-fifth">
                            <span data-ng-repeat="param in car.params | objectsArrayFirst : paramName">
                                {{ param.value | paramBlankValue }}
                                &nbsp;
                                <em>{{ param.paramName.units }}</em>
                            </span>
                        </td>
                        <td data-ng-if="cars.length < 4" colspan="{{ 4 - cars.length }}">&nbsp;</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>*@

<div data-ng-app="carsCompareApplication">
    <div data-ng-controller="compareCtrl">
        <div class="row mt-15">
            <div class="col-md-6">
                <button class="btn btn-success" data-ng-click="addCar()">Выбрать автомобиль для сравнения</button>
            </div>
            <div class="col-md-6 text-right" data-ng-if="!!cars.length">
                <button class="btn btn-link" data-ng-click="clearCars()">Очистить сравнение</button>
            </div>
        </div>
        <div class="row mt-15">
            <div class="col-md-{{ 12 / cars.length }}" data-ng-repeat="car in cars">
                <div class="thumbnail">
                    <button class="btn btn-link" data-ng-click="changeCar($index)">Изменить</button>
                    <span data-ng-click="removeCar($index)" class="close"><span aria-hidden="true">&times;</span></span>
                    <img data-ng-src="{{ car.image }}" alt="{{ car.brand.name + ' ' +  car.model.name + ' ' + car.version.gen + ' ' + car.version.mod + ' ' + car.modify.name + ' ' + ( car.modify.yearFrom | formatBigYear ) + ' &ndash; ' + ( car.modify.yearTo | formatBigYear ) }}" class="mt-25">
                    <div class="caption">
                        <h4 data-ng-class="car.best ? 'text-success' : ''">{{ car.brand.name + ' ' +  car.model.name + ' ' + car.version.gen + ' ' + car.version.mod + ' ' + car.modify.name + ' ' + ( car.modify.yearFrom | formatBigYear ) + ' &ndash; ' + ( car.modify.yearTo | formatBigYear ) }}</h4>
                    </div>
                    <div class="panel-group" id="accordion{{ car.id }}" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                            <div data-ng-repeat="paramGroup in paramGroups">
                                <div class="panel-heading bg-info" role="tab" id="heading{{ car.id }}">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" data-parent="#accordion{{ car.id }}" href="#collapse{{ car.id }}" aria-expanded="true" aria-controls="collapse{{ car.id }}">
                                            {{ paramGroup.name }}
                                        </a>
                                    </h4>
                                </div>
                                <div id="collapse{{ car.id }}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading{{ car.id }}">
                                    <div class="panel-body">
                                        <p data-ng-class="paramName.best ? 'text-success' : 'text-muted'" data-ng-repeat="paramName in paramGroup.paramNames">
                                            {{ paramName.name }} <span data-ng-if="paramName.units">({{ paramName.units }})</span>:
                                            <span data-ng-repeat="param in car.params | objectsArrayFirst : paramName">
                                                {{ param.value | paramBlankValue }}
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/customScripts")